<!--
 -------------------------------------------------------------------------------
 Copyright: (c) BLS OPS LLC.
 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, version 3.
 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.
 You should have received a copy of the GNU General Public License
 along with this program. If not, see <https://www.gnu.org/licenses/>.
 -------------------------------------------------------------------------------
-->

# Azure App Service Exploitation

## Tags
<details><summary>Tags</summary><p>

`#@Azure #@AAD #@Token #@AccessToken #@RefreshToken #@Refresh #@Access #@Service #@Web`

</details>

Azure App Service is an HTTP-based service for hosting web applications, REST APIs, and mobile back ends.

## Background

- Supports boths Windows and Linux environments
- .NET, .NET Core, Java, Ruby, Node.js, PHP, or Python are supported
- Each app runs inside a sandbox but isolation depends upon App Service plans
	+ Apps in Free and Shared tiers run on shared VMs
	+ Apps in Standard and Premium tiers run on dedicated VMs
- Windows apps (not running in Windows containers) have local drives, UNC shares, outbound network connectivity (unless restricted), read access to Registry and event logs
- In the above case, it is also possible to run a PowerShell script and command shell. But the privileges will be of the low-privliege workers process that uses a random application pool identity

## Exploitation

- While there are default security features available with App Service (sandboxing/isolation, encrypted communication, etc) vulnerabilities in the code deployed are abusable
- The classic web application vulnerabilities like SQL injection, insecure file upload, injection attacks, etc are valid
